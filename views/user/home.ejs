<%- include('../partials/header.ejs') %>
<div class="homeDiv">
    <nav class="navbar navbar-expand-lg bg-body-tertiary p-0">
        <div class="container-fluid px-4">
          <a class="navbar-brand" href="#">Blogger</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarText">
            <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="#">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Fashoin</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Tech</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Sports</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Travel</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">News</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/user/profile">
                        <img src="../../public/images/user-person-profile-block-account-circle-svgrepo-com (1).png" alt="" srcset="" height="35px" width="35px">
                    </a>
                </li>
            </ul>
          </div>
        </div>
      </nav>
      <% blogs.forEach( blog => { %>
        <section class="d-flex bannerDiv px-5">
            <div class="bannerSubDiv1">
                <article>
                    <p class="date"> <%= blog.createdAt.toLocaleDateString('en-GB',{
                        day: 'numeric', 
                        month: 'long', 
                        year: 'numeric' 
                    });%> </p>
                    <h3 style="font-weight: bold;" class="pb-3"><%= blog.title %></h3>
                    <p class="p-0 m-0 px-2">
                        <%= blog.description %>
                    </p>

                    <div class="d-flex justify-content-between">
                        <div class="likeAndComments">
                            <% if (blog.likes.includes(userId)) { %>
                                <div class="large-font text-center">
                                    <svg class="svg-heart" data-like-blog-id="<%= blog._id %>" data-isliked="true"  data-like-user-id="<%= userId %>" xmlns="http://www.w3.org/2000/svg"  width="30" height="30" viewBox="0 0 512 512" fill="red">
                                        <path d="M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"/>
                                    </svg>
                                </div>
                            <% } else { %>
                                <div class="large-font text-center">
                                    <svg class="svg-heart" data-like-blog-id="<%= blog._id %>" data-isliked="false"  data-like-user-id="<%= userId %>" xmlns="http://www.w3.org/2000/svg"  width="30" height="30" viewBox="0 0 512 512" fill="grey">
                                        <path d="M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"/>
                                    </svg>
                                </div>
                            <% } %>
                            
                            
                            <div class="likeDiv">
                                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" class="bi bi-chat-dots" viewBox="0 0 16 16">
                                    <path d="M5 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0m4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0m3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2"/>
                                    <path d="m2.165 15.803.02-.004c1.83-.363 2.948-.842 3.468-1.105A9 9 0 0 0 8 15c4.418 0 8-3.134 8-7s-3.582-7-8-7-8 3.134-8 7c0 1.76.743 3.37 1.97 4.6a10.4 10.4 0 0 1-.524 2.318l-.003.011a11 11 0 0 1-.244.637c-.079.186.074.394.273.362a22 22 0 0 0 .693-.125m.8-3.108a1 1 0 0 0-.287-.801C1.618 10.83 1 9.468 1 8c0-3.192 3.004-6 7-6s7 2.808 7 6-3.004 6-7 6a8 8 0 0 1-2.088-.272 1 1 0 0 0-.711.074c-.387.196-1.24.57-2.634.893a11 11 0 0 0 .398-2"/>
                                </svg>
                            </div>

                            <div class="likeDiv">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="30" height="30">
                                    <path d="M307 34.8c-11.5 5.1-19 16.6-19 29.2v64H176C78.8 128 0 206.8 0 304C0 417.3 81.5 467.9 100.2 478.1c2.5 1.4 5.3 1.9 8.1 1.9c10.9 0 19.7-8.9 19.7-19.7c0-7.5-4.3-14.4-9.8-19.5C108.8 431.9 96 414.4 96 384c0-53 43-96 96-96h96v64c0 12.6 7.4 24.1 19 29.2s25 3 34.4-5.4l160-144c6.7-6.1 10.6-14.7 10.6-23.8s-3.8-17.7-10.6-23.8l-160-144c-9.4-8.5-22.9-10.6-34.4-5.4z"/>
                                </svg>
                            </div>
                        </div>
                        <%if(String(userId) != String(blog.user)){%>
                            <button class="view-author" id="viewAuthor" data-user-id="<%=blog.user%>">View Author</button>
                        <%}else{%>
                            <label class="userOwnBlogLabel">YOUR BLOG</label>
                        <%}%>
                    </div>

                    
                </article>
            </div>

            <div class="bannerSubDiv2" style="background-image: url(../../public/uploads/<%=blog.postImg%>);"></div>
        </section>
      <%})%>
      <!-- image gallery -->


    <a class="addBlogBtn" href="/user/loadAddBlog">+</a>


</div>
<script src="/public/script/home.js"></script>
<%- include('../partials/footer.ejs') %>

 